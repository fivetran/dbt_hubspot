version: 2

models:

  - name: hubspot__contact_history
    description: Each record represents a change to contact record in Hubspot; the grain of this model is contact_id -> field_name -> valid_to.
    columns:
      - name: source_relation
        description: "{{ doc('source_relation') }}"

      - name: _fivetran_synced
        description: '{{ doc("_fivetran_synced") }}'

      - name: change_source
        description: '{{ doc("history_source") }}'

      - name: change_source_id
        description: '{{ doc("history_source_id") }}'

      - name: valid_from
        description: The timestamp the change was valid from.

      - name: valid_to
        description: The timestamp the change was valid to. Null if still valid.

      - name: contact_id
        description: The ID of the related contact record.

      - name: field_name
        description: '{{ doc("history_name") }}'

      - name: new_value
        description: '{{ doc("history_value") }}'

      - name: id
        description: The ID of the change. Hashed on `source_relation`, `contact_id`, `field_name`, and `valid_from`.
        tests:
          - unique
          - not_null